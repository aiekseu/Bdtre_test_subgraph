type Contribution @entity {
  id: Bytes!
  timestamp: BigInt!
  user: Bytes!
  contributor: User!
  referralAddress: Bytes!
  amount: BigInt!
  toReferral: BigInt!
  toFund: BigInt!
  toLottery: BigInt!
  toMarketing: BigInt!
  toOwner: BigInt!
  discount: BigInt!
  links: BigInt!
  linksLeft: BigInt!
}

type Refund @entity(immutable: true) {
  id: ID!
  timestamp: BigInt!
  user: Bytes!
  bidNumber: BigInt!
  amountRefunded: BigInt!
  fromBank: BigInt!
}

type Lottery @entity(immutable: true) {
  id: ID!
  timestamp: BigInt!
  number: BigInt!
  winner: Bytes!
  bank: BigInt!
}

type FutureLottery @entity {
    id: ID!
    participants: [User!]! @derivedFrom(field: "lottery")
    participantIds: [Bytes!]!
    bank: BigInt!
}

type User @entity {
    id: Bytes!
    address: Bytes!
    lottery: FutureLottery!
    contributedToCurrentLottery: BigInt!
    contributed: BigInt!
    actualContributed: BigInt!
    earned: BigInt!
    linksCreated: BigInt!
    openLinks: BigInt!
    bids: [Contribution!]! @derivedFrom(field: "contributor")
    bidsIds: [Bytes!]!
}

